<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Vipxvisuta App ğŸ’–</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Segoe UI, Roboto, sans-serif;background:#000;color:#fff;overflow:hidden}
    /* INTRO overlay */
    .intro{
      position:fixed;inset:0;
      background:url('intro.jpg') center/cover no-repeat;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:18px;z-index:40;transition:opacity .9s ease;
    }
    .intro.hidden{opacity:0;pointer-events:none}
    .intro-photo{width:220px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .start-heart{
      width:120px;height:120px;position:relative;cursor:pointer;
      transform:rotate(-45deg);
      background:radial-gradient(circle at 30% 30%, #ff83a2, #ff2a66);
      box-shadow:0 12px 30px rgba(255,90,140,0.35);
      display:inline-block;outline:none;border:0;
      display:flex;align-items:center;justify-content:center;
    }
    .start-heart::before,.start-heart::after{
      content:"";position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%, #ff83a2, #ff2a66);
      width:120px;height:120px;
    }
    .start-heart::before{top:-60px;left:0}
    .start-heart::after{left:60px;top:0}
    @keyframes pulse{0%{transform:scale(1) rotate(-45deg)}50%{transform:scale(1.08) rotate(-45deg)}100%{transform:scale(1) rotate(-45deg)}}
    .start-heart{animation:pulse 1.5s infinite}
    .start-heart > span{transform:rotate(45deg);font-size:40px;margin-left:6px}

    /* MAIN content (scrollable, snap) */
    .main{position:relative;height:100vh;opacity:0;transition:opacity .6s ease;z-index:10;display:block}
    .main.visible{opacity:1}
    .sections{
      height:100vh;overflow-y:auto;scroll-behavior:smooth;
      scroll-snap-type:y mandatory;
      -webkit-overflow-scrolling:touch;
    }
    section{
      min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px;
      background-size:cover;background-position:center;scroll-snap-align:start;text-align:center;
      transition:transform .7s cubic-bezier(.2,.9,.2,1),opacity .6s ease;
      transform: translateY(30px); opacity:0;
    }
    section.in-view{transform: translateY(0); opacity:1}
    h2{font-size:2.1rem;margin-bottom:12px;text-shadow:2px 4px 18px rgba(0,0,0,0.6)}
    p{max-width:760px;font-size:1.05rem;line-height:1.6;text-shadow:1px 2px 10px rgba(0,0,0,0.5)}
    .btn{margin-top:20px;padding:12px 26px;border-radius:24px;border:0;background:#fff;color:#222;font-weight:600;cursor:pointer}
    .btn:hover{transform:translateY(-6px);transition:all .18s ease}

    /* music toggle */
    #music-toggle{position:fixed;top:18px;right:18px;z-index:60;background:rgba(255,255,255,0.92);border:0;border-radius:50%;width:46px;height:46px;font-size:18px;cursor:pointer}

    /* floating hearts (end effect) */
    .floating-heart{position:fixed;font-size:28px;opacity:0;pointer-events:none;animation:floatUp 2.4s ease forwards}
    @keyframes floatUp{0%{transform:translateY(40px) scale(.8);opacity:0}20%{opacity:1}100%{transform:translateY(-260px) scale(1.4);opacity:0}}

    /* per-page backgrounds */
    /* Ensure these filenames match the files you uploaded to the repo */
    #s1{background-image:url('mission.jpg')}
    #s2{background-image:url('emotion.JPG')}
    #s3{background-image:url('agree.jpg')}
    #s4{background-image:url('photo.jpg')} /* optional: photo.jpg â€” if not present, section still shows but background empty */
  </style>
</head>
<body>

  <!-- audio -->
  <audio id="bgAudio" preload="auto" loop>
    <source src="https://github.com/duongdd20-ship-it/vipxvisuta-app/raw/refs/heads/main/background_music.mp3" type="audio/mpeg">
  </audio>

  <!-- music toggle -->
  <button id="music-toggle" aria-label="nhac">ğŸ”ˆ</button>

  <!-- INTRO overlay -->
  <div id="intro" class="intro" role="dialog" aria-label="MÃ n hÃ¬nh má»Ÿ Ä‘áº§u">
    <img id="introPhoto" class="intro-photo" src="photo.jpg" alt="HÃ¬nh ká»· niá»‡m" onerror="this.style.display='none'">
    <button id="startHeart" class="start-heart" title="Báº¥m Ä‘á»ƒ báº¯t Ä‘áº§u" aria-pressed="false"><span>â¤</span></button>
    <div style="margin-top:14px;font-size:1.05rem;text-shadow:1px 1px 8px rgba(0,0,0,0.6)">Báº¥m trÃ¡i tim Ä‘á»ƒ má»Ÿ thiá»‡p</div>
  </div>

  <!-- MAIN content -->
  <div id="main" class="main" aria-hidden="true">
    <div class="sections" id="sections">
      <!-- Section 1 -->
      <section id="s1">
        <h2><!-- EDIT TITLE: S1 -->ğŸ’Œ Nhiá»‡m vá»¥ Ä‘áº·c biá»‡t</h2>
        <p><!-- EDIT TEXT: S1 -->MÃ£ nhiá»‡m vá»¥: <strong>I.M.D. S.P.E.C.I.A.L</strong><br>HoÃ n thÃ nh nhiá»‡m vá»¥: cÃ¹ng anh Ä‘i Äƒn tá»‘i ngÃ y 14/11 nhÃ© ğŸ’•</p>
        <button class="btn" data-next="1">Tiáº¿p tá»¥c</button>
      </section>

      <!-- Section 2 -->
      <section id="s2">
        <h2><!-- EDIT TITLE: S2 -->ğŸ± Cáº£m xÃºc</h2>
        <p><!-- EDIT TEXT: S2 -->(Viáº¿t cáº£m xÃºc cá»§a báº¡n á»Ÿ Ä‘Ã¢y â€” vÃ­ dá»¥: "Khi Ä‘á»c, anh tháº¥y tim rung...")</p>
        <button class="btn" data-next="2">Tiáº¿p tá»¥c</button>
      </section>

      <!-- Section 3 -->
      <section id="s3">
        <h2><!-- EDIT TITLE: S3 -->ğŸ Lá»i Ä‘á»“ng Ã½</h2>
        <p><!-- EDIT TEXT: S3 -->Anh Ä‘á»“ng Ã½ nhÃ© ğŸ’– Háº¹n em tá»‘i 14/11.</p>
        <button class="btn" data-next="3">Tiáº¿p tá»¥c</button>
      </section>

      <!-- Section 4 -->
      <section id="s4">
        <h2><!-- EDIT TITLE: S4 -->ğŸŒ¹ Lá»i chÃºc & Káº¿t</h2>
        <p><!-- EDIT TEXT: S4 -->(Viáº¿t lá»i chÃºc á»Ÿ Ä‘Ã¢y â€” vÃ­ dá»¥: "ChÃºc em luÃ´n khá»e, vui vÃ  háº¡nh phÃºc")</p>
        <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:18px">
          <button class="btn" id="heartBtn">ğŸ’ Gá»­i tim</button>
          <button class="btn" id="restartBtn">ğŸ” Quay láº¡i tá»« Ä‘áº§u</button>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ELEMENTS
    const intro = document.getElementById('intro');
    const startHeart = document.getElementById('startHeart');
    const main = document.getElementById('main');
    const sectionsEl = document.getElementById('sections');
    const audioEl = document.getElementById('bgAudio');
    const musicToggle = document.getElementById('music-toggle');
    const restartBtn = document.getElementById('restartBtn');
    const heartBtn = document.getElementById('heartBtn');

    let musicOn = false;

    // Helper: add intersection observer to animate sections
    const observer = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          entry.target.classList.add('in-view');
        } else {
          entry.target.classList.remove('in-view');
        }
      });
    }, {threshold: 0.38}); // trigger when ~38% visible

    document.querySelectorAll('.sections > section').forEach(s=>{
      observer.observe(s);
    });

    // Start behavior: click heart -> open
    startHeart.addEventListener('click', ()=>{
      // small visual feedback
      startHeart.style.transform = 'scale(1.06) rotate(-45deg)';
      setTimeout(()=> startHeart.style.transform = '', 220);

      // hide intro, show main
      intro.classList.add('hidden');
      main.classList.add('visible');
      main.setAttribute('aria-hidden','false');

      // scroll to top of sections
      sectionsEl.scrollTop = 0;

      // play music (user gesture)
      audioEl.currentTime = 0;
      audioEl.play().then(()=> {
        musicOn = true; musicToggle.textContent = 'ğŸ”Š';
      }).catch(()=> { musicOn = false; musicToggle.textContent = 'ğŸ”ˆ'; });
    });

    // Btns "Tiáº¿p tá»¥c" scroll to next section
    document.querySelectorAll('.btn[data-next]').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const idx = Number(btn.getAttribute('data-next'));
        const sections = document.querySelectorAll('.sections > section');
        if (sections[idx]) sections[idx].scrollIntoView({behavior:'smooth'});
      });
    });

    // Heart effect at end
    function createFloatingHearts(count=20){
      for(let i=0;i<count;i++){
        const f = document.createElement('div');
        f.className = 'floating-heart';
        f.textContent = 'ğŸ’–';
        f.style.left = (6 + Math.random()*88) + 'vw';
        f.style.bottom = (-10 - Math.random()*20) + 'px';
        f.style.fontSize = (16 + Math.random()*36) + 'px';
        f.style.animationDuration = (1.5 + Math.random()*1.6) + 's';
        document.body.appendChild(f);
        setTimeout(()=> f.remove(), 3800);
      }
    }

    heartBtn.addEventListener('click', ()=> createFloatingHearts(22));

    // Restart: go back to intro exactly like first-open
    restartBtn.addEventListener('click', ()=>{
      audioEl.pause(); audioEl.currentTime = 0; musicOn = false; musicToggle.textContent='ğŸ”ˆ';
      main.classList.remove('visible'); main.setAttribute('aria-hidden','true');
      sectionsEl.scrollTop = 0;
      intro.classList.remove('hidden');
    });

    // Music toggle
    musicToggle.addEventListener('click', ()=>{
      if(musicOn){
        audioEl.pause(); musicOn=false; musicToggle.textContent='ğŸ”ˆ';
      } else {
        audioEl.play().then(()=>{ musicOn=true; musicToggle.textContent='ğŸ”Š'; }).catch(()=>{ musicOn=false; musicToggle.textContent='ğŸ”ˆ'; });
      }
    });

    // Accessibility (Enter to open)
    startHeart.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' ') startHeart.click(); });

    // Preload images (ensures backgrounds available)
    const imgs = ['intro.jpg','photo.jpg','mission.jpg','emotion.JPG','agree.jpg'];
    imgs.forEach(src=> { const im=new Image(); im.src=src; });
  </script>
</body>
</html>
