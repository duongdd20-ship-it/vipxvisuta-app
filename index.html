<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Vipxvisuta App ğŸ’–</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Segoe UI, Roboto, sans-serif;background:#000;color:#fff;overflow:hidden}
    /* INTRO overlay */
    .intro{
      position:fixed;inset:0;
      background:url('intro.jpg') center/cover no-repeat;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:18px;z-index:40;transition:opacity 0.9s ease;
    }
    .intro.hidden{opacity:0;pointer-events:none}
    .intro-photo{width:220px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .start-heart{
      width:120px;height:120px;position:relative;cursor:pointer;
      transform:rotate(-45deg);
      background:radial-gradient(circle at 30% 30%, #ff83a2, #ff2a66);
      box-shadow:0 12px 30px rgba(255,90,140,0.35);
      display:inline-block;
    }
    .start-heart::before,.start-heart::after{
      content:"";position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%, #ff83a2, #ff2a66);
      width:120px;height:120px;
    }
    .start-heart::before{top:-60px;left:0}
    .start-heart::after{left:60px;top:0}
    @keyframes pulse{0%{transform:scale(1) rotate(-45deg)}50%{transform:scale(1.08) rotate(-45deg)}100%{transform:scale(1) rotate(-45deg)}}
    .start-heart{animation:pulse 1.5s infinite}

    /* MAIN content (scrollable, snap) */
    .main{
      position:relative;
      height:100vh;
      opacity:0;transition:opacity .8s ease;
      z-index:10;
      display:block;
    }
    .main.visible{opacity:1}
    .sections{
      height:100vh;overflow-y:auto;scroll-behavior:smooth;
      scroll-snap-type:y mandatory;
    }
    section{
      min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px;
      background-size:cover;background-position:center;scroll-snap-align:start;
      text-align:center;
    }
    h2{font-size:2.3rem;margin-bottom:12px;text-shadow:2px 4px 18px rgba(0,0,0,0.6)}
    p{max-width:760px;font-size:1.15rem;line-height:1.6;text-shadow:1px 2px 10px rgba(0,0,0,0.5)}
    .btn{margin-top:20px;padding:12px 26px;border-radius:24px;border:0;background:#fff;color:#222;font-weight:600;cursor:pointer}
    .btn:hover{transform:translateY(-4px);transition:all .18s ease}

    /* music toggle */
    #music-toggle{position:fixed;top:18px;right:18px;z-index:50;background:rgba(255,255,255,0.9);border:0;border-radius:50%;width:46px;height:46px;font-size:18px;cursor:pointer}

    /* floating hearts (end effect) */
    .floating-heart{
      position:fixed;font-size:28px;opacity:0;pointer-events:none;
      animation:floatUp 2.4s ease forwards;
    }
    @keyframes floatUp{
      0%{transform:translateY(40px) scale(.8);opacity:0}
      20%{opacity:1}
      100%{transform:translateY(-260px) scale(1.4);opacity:0}
    }

    /* per-page backgrounds (change filenames if needed) */
    #s1{background-image:url('mission.jpg')}
    #s2{background-image:url('emotion.JPG')}
    #s3{background-image:url('agree.jpg')}
    #s4{background-image:url('photo.jpg')} /* náº¿u muá»‘n trang 4 lÃ  áº£nh khÃ¡c */
  </style>
</head>
<body>

  <!-- audio (use your uploaded GitHub raw link or catbox link) -->
  <audio id="bgAudio" preload="auto" loop>
    <source src="https://github.com/duongdd20-ship-it/vipxvisuta-app/raw/refs/heads/main/background_music.mp3" type="audio/mpeg">
  </audio>

  <!-- music toggle -->
  <button id="music-toggle" aria-label="nhac">ğŸ”ˆ</button>

  <!-- INTRO overlay -->
  <div id="intro" class="intro" role="dialog" aria-label="MÃ n hÃ¬nh má»Ÿ Ä‘áº§u">
    <!-- optional photo: change filename 'photo.jpg' if you uploaded different -->
    <img id="introPhoto" class="intro-photo" src="photo.jpg" alt="HÃ¬nh ká»· niá»‡m" onerror="this.style.display='none'">
    <div id="startHeart" class="start-heart" title="Báº¥m Ä‘á»ƒ báº¯t Ä‘áº§u" role="button" aria-pressed="false"></div>
    <div style="margin-top:14px;font-size:1.05rem;text-shadow:1px 1px 8px rgba(0,0,0,0.6)">Báº¥m trÃ¡i tim Ä‘á»ƒ má»Ÿ thiá»‡p</div>
  </div>

  <!-- MAIN content -->
  <div id="main" class="main" aria-hidden="true">
    <div class="sections" id="sections">
      <!-- Section 1: nhiá»‡m vá»¥ -->
      <section id="s1">
        <h2><!-- EDIT TITLE: S1 -->ğŸ’Œ Nhiá»‡m vá»¥ Ä‘áº·c biá»‡t</h2>
        <p><!-- EDIT TEXT: S1 -->MÃ£ nhiá»‡m vá»¥: <strong>I.M.D. S.P.E.C.I.A.L</strong><br>
          HoÃ n thÃ nh nhiá»‡m vá»¥: cÃ¹ng anh Ä‘i Äƒn tá»‘i ngÃ y 14/11 nhÃ© ğŸ’•
        </p>
        <button class="btn" data-next="1">Tiáº¿p tá»¥c</button>
      </section>

      <!-- Section 2: cáº£m xÃºc -->
      <section id="s2">
        <h2><!-- EDIT TITLE: S2 -->ğŸ± Cáº£m xÃºc</h2>
        <p><!-- EDIT TEXT: S2 -->(Ghi cáº£m xÃºc cá»§a báº¡n vÃ o Ä‘Ã¢y â€” vÃ­ dá»¥: "Khi Ä‘á»c lá»i má»i, tim anh rung...")</p>
        <button class="btn" data-next="2">Tiáº¿p tá»¥c</button>
      </section>

      <!-- Section 3: lá»i Ä‘á»“ng Ã½ -->
      <section id="s3">
        <h2><!-- EDIT TITLE: S3 -->ğŸ Lá»i Ä‘á»“ng Ã½</h2>
        <p><!-- EDIT TEXT: S3 -->Anh Ä‘á»“ng Ã½ nhÃ© ğŸ’– Háº¹n em tá»‘i 14/11.</p>
        <button class="btn" data-next="3">Tiáº¿p tá»¥c</button>
      </section>

      <!-- Section 4: lá»i chÃºc / káº¿t -->
      <section id="s4">
        <h2><!-- EDIT TITLE: S4 -->ğŸŒ¹ Lá»i chÃºc & Káº¿t</h2>
        <p><!-- EDIT TEXT: S4 -->(Viáº¿t lá»i chÃºc cá»§a báº¡n á»Ÿ Ä‘Ã¢y â€” vÃ­ dá»¥: "ChÃºc em luÃ´n khá»e, vui, vÃ  háº¡nh phÃºc")</p>
        <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:18px">
          <button class="btn" id="heartBtn">ğŸ’ Gá»­i tim</button>
          <button class="btn" id="restartBtn">ğŸ” Quay láº¡i tá»« Ä‘áº§u</button>
        </div>
      </section>
    </div>
  </div>

  <script>
    // Elements
    const intro = document.getElementById('intro');
    const startHeart = document.getElementById('startHeart');
    const main = document.getElementById('main');
    const sectionsEl = document.getElementById('sections');
    const audioEl = document.getElementById('bgAudio');
    const musicToggle = document.getElementById('music-toggle');
    const restartBtn = document.getElementById('restartBtn');
    const heartBtn = document.getElementById('heartBtn');

    let started = false;
    let musicOn = false;

    // Start behavior: click heart to open
    startHeart.addEventListener('click', () => {
      // small visual feedback
      startHeart.style.transform = 'scale(1.05) rotate(-45deg)';
      setTimeout(() => startHeart.style.transform = '', 200);

      // hide intro, show main
      intro.classList.add('hidden');
      main.classList.add('visible');
      main.setAttribute('aria-hidden','false');

      // reset scroll to top of sections
      sectionsEl.scrollTop = 0;

      // attempt to play music - browsers may require user gesture (we have it)
      audioEl.currentTime = 0;
      audioEl.play().then(()=> {
        musicOn = true;
        musicToggle.textContent = 'ğŸ”Š';
      }).catch(()=> {
        musicOn = false;
        musicToggle.textContent = 'ğŸ”ˆ';
      });

      started = true;
    });

    // Buttons "Tiáº¿p tá»¥c" scroll to next section (smooth)
    document.querySelectorAll('.btn[data-next]').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const idx = Number(btn.getAttribute('data-next'));
        const sections = document.querySelectorAll('.sections > section');
        if (sections[idx]) sections[idx].scrollIntoView({behavior:'smooth'});
      });
    });

    // heart effect at end: create multiple hearts floating
    function createFloatingHearts(count=18){
      for(let i=0;i<count;i++){
        const f = document.createElement('div');
        f.className = 'floating-heart';
        f.textContent = 'ğŸ’–';
        // random left across viewport
        f.style.left = (10 + Math.random()*80) + 'vw';
        f.style.bottom = (-20 - Math.random()*10) + 'px';
        f.style.fontSize = (18 + Math.random()*32) + 'px';
        f.style.animationDuration = (1.6 + Math.random()*1.8) + 's';
        document.body.appendChild(f);
        setTimeout(()=> f.remove(), 3800);
      }
    }

    heartBtn.addEventListener('click', ()=> {
      // small click effect
      createFloatingHearts(22);
      // optional sound effect could be played here
    });

    // Restart: go back to intro (exactly like first-open)
    restartBtn.addEventListener('click', ()=> {
      // stop music and reset
      audioEl.pause();
      audioEl.currentTime = 0;
      musicOn = false;
      musicToggle.textContent = 'ğŸ”ˆ';
      // hide main, show intro
      main.classList.remove('visible');
      main.setAttribute('aria-hidden','true');
      // scroll sections to top for next time
      sectionsEl.scrollTop = 0;
      // show intro
      intro.classList.remove('hidden');
      started = false;
    });

    // Music toggle button (works both before/after start)
    musicToggle.addEventListener('click', ()=>{
      if (musicOn){
        audioEl.pause();
        musicOn = false;
        musicToggle.textContent = 'ğŸ”ˆ';
      } else {
        audioEl.play().then(()=> {
          musicOn = true;
          musicToggle.textContent = 'ğŸ”Š';
        }).catch(()=> {
          musicOn = false;
          musicToggle.textContent = 'ğŸ”ˆ';
        });
      }
    });

    // Accessibility: allow Enter/Space on startHeart
    startHeart.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') startHeart.click();
    });
  </script>
</body>
</html>
